<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Happy Birthday, My Mary! ‚ù§Ô∏è</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@400;600&display=swap" rel="stylesheet"/>
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(to bottom right, #fbcfe8, #e9d5ff, #fecdd3);
      min-height: 100vh;
      overflow-x: hidden;
    }
    .title-font {
      font-family: 'Dancing Script', cursive;
    }
    /* Cake */
    .cake-container {
      width: 280px;
      height: 260px;
      margin: 0 auto;
      position: relative;
      perspective: 800px;          /* helps 3D feel on mobile too */
    }
    .cake {
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 260px;
      transition: all 1.4s ease-out;
      will-change: transform;
    }
    .cake.split {
      transform: translateX(-50%) rotateX(15deg);
    }
    .layer {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      border-radius: 12px;
      box-shadow: 0 10px 20px rgba(0,0,0,0.25);
      will-change: transform;
    }
    .bottom { width: 260px; height: 70px; background: linear-gradient(#8B4513, #A0522D); bottom: 0; }
    .middle { width: 220px; height: 60px; background: linear-gradient(#CD853F, #D2A679); bottom: 70px; }
    .top    { width: 180px; height: 55px; background: linear-gradient(#E6B87D, #F4D9B0); bottom: 130px; }
    .icing  { width: 180px; height: 40px; background: linear-gradient(#FFF0F5, #FFB6C1); bottom: 180px; border-radius: 50% 50% 0 0; }
    
    /* Candle */
    .candle {
      position: absolute;
      width: 14px;
      height: 60px;
      background: linear-gradient(#fff, #ffcccc);
      border-radius: 6px 6px 0 0;
      cursor: pointer;
      touch-action: manipulation;
      will-change: transform, opacity;
    }
    .candle.lit .flame {
      opacity: 1;
      animation: flicker 1.2s infinite alternate;
    }
    .wick {
      position: absolute;
      width: 4px;
      height: 14px;
      background: #333;
      top: -12px;
      left: 50%;
      transform: translateX(-50%);
    }
    .flame {
      position: absolute;
      width: 20px;
      height: 32px;
      background: radial-gradient(circle at 40% 30%, #ff4500, #ffd700 50%, transparent);
      border-radius: 50% 50% 40% 40%;
      top: -38px;
      left: 50%;
      transform: translateX(-50%);
      opacity: 0;
      filter: blur(1.5px);
      box-shadow: 0 0 16px #ff4500, 0 0 32px #ffd700;
      will-change: transform, opacity;
    }
    @keyframes flicker {
      0%   { transform: translateX(-50%) scale(1) translateY(0); }
      50%  { transform: translateX(-50%) scale(1.12) translateY(-4px); }
      100% { transform: translateX(-50%) scale(0.96) translateY(3px); }
    }
    
    /* Hearts */
    .heart {
      position: absolute;
      font-size: 32px;
      pointer-events: none;
      animation: floatUp 5s linear forwards;
      z-index: 30;
    }
    @keyframes floatUp {
      0%   { transform: translateY(0) scale(1); opacity: 1; }
      100% { transform: translateY(-900px) scale(0.5); opacity: 0; }
    }
    
    /* Typewriter */
    .typewriter {
      overflow: hidden;
      border-right: 0.15em solid #ff1493;
      white-space: nowrap;
      animation: typing 5s steps(60, end) forwards, blink 0.8s step-end infinite;
    }
    @keyframes typing {
      from { width: 0; }
      to   { width: 100%; }
    }
    @keyframes blink {
      from, to { border-color: transparent; }
      50%      { border-color: #ff1493; }
    }
    
    /* Modal */
    .modal {
      animation: pop 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    @keyframes pop {
      0%   { transform: scale(0.7); opacity: 0; }
      100% { transform: scale(1); opacity: 1; }
    }
  </style>
</head>
<body class="text-center text-gray-800">

  <!-- Hero -->
  <section class="min-h-screen flex flex-col items-center justify-center px-4 py-12">
    <div class="text-8xl animate-bounce cursor-pointer mb-6" onclick="confetti()">üéÇ</div>
    <h1 class="title-font text-7xl md:text-9xl text-pink-600 mb-2">Happy Birthday</h1>
    <p class="title-font text-6xl md:text-8xl text-rose-500 mb-10">My Mary ‚ù§Ô∏è</p>
    <button onclick="document.getElementById('cake').scrollIntoView({behavior:'smooth'})"
            class="bg-white text-pink-600 px-10 py-5 rounded-full text-2xl font-bold shadow-xl hover:scale-105 transition">
      Let's Cut the Cake üéâ
    </button>
  </section>

  <!-- Cake Section -->
  <section id="cake" class="py-16 bg-white/60">
    <div class="max-w-md mx-auto px-4">
      <h2 class="title-font text-5xl text-pink-600 mb-6">Cut the Cake, Baby! üéÇ</h2>
      <p class="text-xl text-gray-700 mb-10">Light all candles first ‚Üí then cut! üíã</p>

      <div class="cake-container">
        <div class="cake" id="cakeEl">
          <div class="layer bottom"></div>
          <div class="layer middle"></div>
          <div class="layer top"></div>
          <div class="layer icing"></div>
          <!-- Cherries -->
          <div class="absolute w-5 h-5 bg-rose-500 rounded-full shadow-md" style="top: -10px; left: 25%;"></div>
          <div class="absolute w-5 h-5 bg-rose-500 rounded-full shadow-md" style="top: -10px; left: 50%;"></div>
          <div class="absolute w-5 h-5 bg-rose-500 rounded-full shadow-md" style="top: -10px; left: 75%;"></div>
        </div>

        <!-- Candles -->
        <div id="candles" class="relative flex justify-center gap-6" style="height: 100px; bottom: 220px;"></div>
      </div>

      <div class="mt-12 flex flex-col sm:flex-row justify-center gap-6">
        <button onclick="lightAll()"
                class="bg-rose-500 hover:bg-rose-600 text-white px-10 py-5 rounded-2xl text-xl font-bold transition">
          ‚ú® Light All Candles ‚ú®
        </button>
        <button id="cutBtn" onclick="cut()"
                class="bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white px-10 py-5 rounded-2xl text-xl font-bold transition opacity-50 cursor-not-allowed" disabled>
          üî™ Cut Cake!
        </button>
      </div>

      <div id="reveal" class="hidden mt-12 text-3xl title-font text-pink-600 bg-white/80 py-8 px-10 rounded-3xl shadow-2xl mx-auto max-w-xs">
        The sweetest thing in my life is YOU üíñ<br>
        <span class="text-xl block mt-4">Happy Birthday, my forever love!</span>
      </div>
    </div>
  </section>

  <!-- Message -->
  <section class="py-20">
    <div class="max-w-md mx-auto px-4 text-center">
      <div onclick="openLetter()" class="cursor-pointer mx-auto w-72 h-72 bg-white rounded-3xl shadow-2xl flex items-center justify-center border-8 border-pink-300 hover:border-pink-500 transition">
        <div>
          <div class="text-8xl mb-4">üíå</div>
          <p class="text-3xl title-font text-pink-600">Open My Letter</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Final -->
  <section class="py-24 bg-pink-600 text-white">
    <div class="max-w-md mx-auto px-4">
      <div class="text-7xl mb-6 animate-bounce">I ‚ù§Ô∏è YOU</div>
      <p class="text-3xl title-font mb-10">You are my today and all of my tomorrows</p>
      <button onclick="finalKiss()" class="bg-white text-pink-600 px-12 py-6 rounded-full text-3xl font-bold hover:scale-110 transition shadow-2xl">
        One More Kiss üíã
      </button>
    </div>
  </section>

  <!-- Modal -->
  <div id="modal" class="hidden fixed inset-0 bg-black/70 flex items-center justify-center z-50 px-4">
    <div class="modal bg-white rounded-3xl max-w-lg w-full p-8 relative">
      <button onclick="closeLetter()" class="absolute top-4 right-6 text-5xl text-gray-400 hover:text-pink-500">√ó</button>
      <div class="text-center mb-6">
        <div class="text-7xl mb-4">üíñ</div>
        <h3 class="title-font text-5xl text-pink-600">To My Beautiful Future Wifeee</h3>
      </div>
      <div id="letterText" class="text-lg leading-relaxed text-gray-700 min-h-[200px]"></div>
      <div class="text-right mt-8 text-pink-400 font-medium">‚Äî Forever yours, Ayush ‚ù§Ô∏è</div>
    </div>
  </div>

  <script>
    const message = `My dearest love,\n\nEvery day with you feels like a beautiful dream I never want to wake up from. You make my heart skip beats, you fill my life with laughter, color, and endless joy.\n\nOn your special day, I want to thank you for being the most amazing girlfriend, my best friend, my safe place, and the love of my life.\n\nMay this year bring you all the happiness you deserve (and more kisses from me üòâ).\n\nI love you more than all the stars in the sky.\n\nForever and always,\nAyush üíï`;

    let lit = 0;
    const total = 7;

    function createCandles() {
      const cont = document.getElementById('candles');
      cont.innerHTML = '';
      for (let i = 0; i < total; i++) {
        const candle = document.createElement('div');
        candle.className = 'candle flex flex-col items-center';
        candle.style.transform = `translateX(${(i - total/2 + 0.5) * 38}px)`;
        candle.innerHTML = `
          <div class="flame"></div>
          <div class="wick"></div>
          <div class="w-3.5 h-16 bg-gradient-to-t from-white to-pink-100 rounded-t"></div>
        `;
        candle.onclick = candle.ontouchstart = (e) => {
          e.preventDefault();
          if (!candle.classList.contains('lit')) {
            candle.classList.add('lit');
            lit++;
            confetti({particleCount: 60, spread: 60});
            if (lit >= total) enableCut();
          }
        };
        cont.appendChild(candle);
      }
    }

    function lightAll() {
      const candles = document.querySelectorAll('.candle');
      candles.forEach((c, i) => {
        setTimeout(() => {
          c.classList.add('lit');
          confetti({particleCount: 40, spread: 50});
        }, i * 140);
      });
      lit = total;
      enableCut();
    }

    function enableCut() {
      const btn = document.getElementById('cutBtn');
      btn.disabled = false;
      btn.classList.remove('opacity-50', 'cursor-not-allowed');
    }

    function cut() {
      document.getElementById('cakeEl').classList.add('split');
      confetti({particleCount: 180, spread: 90, origin: {y: 0.6}});
      setTimeout(() => {
        document.getElementById('reveal').classList.remove('hidden');
      }, 900);
      launchHearts(20);
    }

    function launchHearts(count) {
      const area = document.querySelector('.cake-container');
      for (let i = 0; i < count; i++) {
        setTimeout(() => {
          const h = document.createElement('div');
          h.className = 'heart';
          h.textContent = ['üíñ','‚ù§Ô∏è','üíó','üíì'][Math.floor(Math.random()*4)];
          h.style.left = Math.random() * 100 + '%';
          h.style.animationDuration = (Math.random() * 3 + 4) + 's';
          area.appendChild(h);
          setTimeout(() => h.remove(), 6000);
        }, i * 80);
      }
    }

    function openLetter() {
      const modal = document.getElementById('modal');
      const txt = document.getElementById('letterText');
      modal.classList.remove('hidden');
      txt.innerHTML = '';
      let i = 0;
      function type() {
        if (i < message.length) {
          txt.innerHTML += message[i] === '\n' ? '<br>' : message[i];
          i++;
          setTimeout(type, 35);
        }
      }
      type();
      confetti({particleCount: 120, spread: 80});
    }

    function closeLetter() {
      document.getElementById('modal').classList.add('hidden');
    }

    function finalKiss() {
      confetti({particleCount: 250, spread: 120});
      launchHearts(35);
      alert("MUAH! üíã I LOVE YOU SO MUCH!"); // or fancier floating text if you want
    }

    // Init
    window.onload = () => {
      createCandles();
      confetti({particleCount: 100, spread: 70});
      // Optional: pre-light 2-3 candles for demo feel
      setTimeout(() => {
        const c = document.querySelectorAll('.candle');
        if (c[1]) c[1].classList.add('lit');
        if (c[3]) c[3].classList.add('lit');
        lit = 2;
      }, 1400);
    };
  </script>
</body>
</html>
